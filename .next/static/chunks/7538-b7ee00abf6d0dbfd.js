"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7538],{4553:function(e,t,s){var a=s(7437),r=s(9376),l=s(2626),n=s(7753),d=s(2265),i=s(9343),c=s(7583),o=s.n(c);t.Z=e=>{let{isOpen:t,onClose:s,taskStatusData:c}=e,{register:m,handleSubmit:u,formState:{errors:x},reset:p}=(0,i.cI)({resolver:(0,n.X)(l.lj),defaultValues:c||{}});(0,d.useEffect)(()=>{c?p(c):p()},[c,p]);let h=c?"/task-status/update/".concat(c.id):"/task-status/create",{mutate:b,isPending:y,isSuccess:f,isError:g,error:j}=(0,r.s)({endpoint:h,onSuccessMessage:"Task Status added successfully!",invalidateQueryKeys:["taskStatuses"]}),N=async e=>{b({name:e.name,description:e.description})};return(0,d.useEffect)(()=>{f?p({id:"",name:"",description:""}):g&&console.error("Failed to create/update the task status",j)},[j,g,f,p]),(0,a.jsx)(o(),{isOpen:t,onRequestClose:s,ariaHideApp:!1,contentLabel:"Create/Update Task Status",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),(0,a.jsx)("h1",{className:"text-center text-2xl font-bold mb-6",children:c?"Update Task Status":"Create Task Status"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:u(N),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Status Name"}),(0,a.jsx)("input",{type:"text",...m("name"),className:"w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ".concat(x.name?"border-red-500":"border-gray-300"),placeholder:"Enter task status name"}),x.name&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),(0,a.jsx)("textarea",{...m("description"),className:"w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ".concat(x.description?"border-red-500":"border-gray-300"),placeholder:"Enter description",rows:3}),x.description&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.description.message})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ".concat(y?"opacity-50 cursor-not-allowed":""),disabled:y,children:y?c?"Updating...":"Creating...":c?"Update Task Status":"Create Task Status"}),g&&(0,a.jsx)("p",{className:"text-red-500 mt-2 text-center",children:j+""}),f&&(0,a.jsx)("p",{className:"text-green-500 mt-2 text-center",children:"Added Successfully"})]})]})})}},818:function(e,t,s){var a=s(7437),r=s(9376),l=s(2626),n=s(7753),d=s(2265),i=s(9343),c=s(7583),o=s.n(c);t.Z=e=>{let{isOpen:t,onClose:s,taskTypeData:c}=e,{register:m,handleSubmit:u,formState:{errors:x},reset:p}=(0,i.cI)({resolver:(0,n.X)(l._v),defaultValues:c||{}});(0,d.useEffect)(()=>{c?p(c):p()},[c,p]);let h=c?"/task-type/update/".concat(c.id):"/task-type/create",{mutate:b,isPending:y,isSuccess:f,isError:g,error:j}=(0,r.s)({endpoint:h,onSuccessMessage:"Task Type added successfully!",invalidateQueryKeys:["taskTypes"]}),N=async e=>{b({name:e.name,description:e.description}),console.log(h)};return(0,d.useEffect)(()=>{f?p({id:"",name:"",description:""}):g&&console.error("Failed to create/update the task type",j)},[j,g,f,p]),(0,a.jsx)(o(),{isOpen:t,onRequestClose:s,ariaHideApp:!1,contentLabel:"Create/Update Task Type",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),(0,a.jsx)("h1",{className:"text-center text-2xl font-bold mb-6",children:c?"Update Task Type":"Create Task Type"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:u(N),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Type Name"}),(0,a.jsx)("input",{type:"text",...m("name"),className:"w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ".concat(x.name?"border-red-500":"border-gray-300"),placeholder:"Enter task type name"}),x.name&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),(0,a.jsx)("textarea",{...m("description"),className:"w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ".concat(x.description?"border-red-500":"border-gray-300"),placeholder:"Enter description",rows:3}),x.description&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.description.message})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ".concat(y?"opacity-50 cursor-not-allowed":""),disabled:y,children:y?c?"Updating...":"Creating...":c?"Update Task Type":"Create Task Type"}),g&&(0,a.jsx)("p",{className:"text-red-500 mt-2 text-center",children:j+""}),f&&(0,a.jsx)("p",{className:"text-green-500 mt-2 text-center",children:"Added Successfully"})]})]})})}},9671:function(e,t,s){var a=s(7437);s(2265);var r=s(9175),l=s(5740);t.Z=e=>{let{open:t,message:s,severity:n,onClose:d}=e,i=(e,t)=>{"clickaway"!==t&&d()};return(0,a.jsx)(r.Z,{open:t,autoHideDuration:2e3,onClose:i,children:(0,a.jsx)(l.Z,{onClose:i,severity:n,variant:"filled",sx:{width:"100%"},children:s})})}},2299:function(e,t,s){var a=s(7437);s(2265),t.Z=e=>{let{children:t,extraStyle:s}=e;return(0,a.jsx)("div",{className:"sm:w-full mobile-grid sm:desktop-grid  "+s,children:t})}},7442:function(e,t,s){s.d(t,{Z:function(){return C}});var a=s(7437),r=s(9671),l=s(9376),n=s(7300),d=s(2626),i=s(7753),c=s(2265),o=s(9343),m=s(7583),u=s.n(m),x=s(4553),p=s(818);let h="ec2-35-173-139-149.compute-1.amazonaws.com";var b=e=>{let{isOpen:t,onClose:s,taskData:m}=e,{register:b,handleSubmit:y,formState:{errors:f},reset:g,watch:j}=(0,o.cI)({resolver:(0,i.X)(d.KV),defaultValues:m||{}}),[N,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{m?g(m):g()},[m,g]);let[k,w]=(0,c.useState)({open:!1,message:"",severity:"success"}),_=m?"/tasks/update/".concat(m.id):"/tasks/create",{mutate:T,isPending:q,isSuccess:S,isError:Z,error:C}=(0,l.s)({endpoint:_,onSuccessMessage:"Task added successfully!",invalidateQueryKeys:["tasks"]}),E=async e=>{v(null),T({...e,due_date:new Date(e.due_date).toISOString()}),setInterval(s,3e3)};(0,c.useEffect)(()=>{S?(w({open:!0,message:m?"Task updated successfully!":"Task created successfully!",severity:"success"}),g()):Z&&(console.error("Error creating/updating task:",C),w({open:!0,message:C+""||"Failed to process the request. Please try again.",severity:"error"}))},[C,Z,S,g,m]);let{data:D}=(0,n.Z)({queryKey:["taskTypes"],url:"http://".concat(h,"/task-type/find-all"),setSnackbarConfig:w,nestedData:!0}),{data:I}=(0,n.Z)({queryKey:["taskStatuses"],url:"http://".concat(h,"/task-status/find-all"),setSnackbarConfig:w,nestedData:!0}),{data:A}=(0,n.Z)({queryKey:["departments"],url:"http://".concat(h,"/department/get-departments"),setSnackbarConfig:w}),{data:z}=(0,n.Z)({queryKey:["employees"],url:"http://".concat(h,"/emp/get-all-emps"),setSnackbarConfig:w}),R=j("emp"),P=j("department_id"),[U,K]=(0,c.useState)(!1),[L,O]=(0,c.useState)(!1);(0,c.useEffect)(()=>{R?O(!0):O(!1),P?K(!0):K(!1)},[R,P]);let[F,H]=(0,c.useState)(!1),[M,B]=(0,c.useState)(!1);return(0,a.jsxs)(u(),{isOpen:t,onRequestClose:s,ariaHideApp:!1,contentLabel:"Create/Update Task",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),(0,a.jsx)("h1",{className:"text-center text-2xl font-bold mb-6",children:m?"Update Task":"Create Task"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:y(E),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Name"}),(0,a.jsx)("input",{type:"text",...b("name"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.name?"border-red-500":"border-gray-300"),placeholder:"Enter task name"}),f.name&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),(0,a.jsx)("textarea",{...b("description"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.description?"border-red-500":"border-gray-300"),placeholder:"Enter task description"}),f.description&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.description.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Type"}),(0,a.jsxs)("div",{className:"flex gap-[8px]",children:[(0,a.jsxs)("select",{...b("task_type"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.task_type?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("option",{value:"",children:"Select a task type"}),D&&D.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("div",{onClick:()=>B(!0),className:"border-gray-500 border-dashed border-2 text-center rounded-md w-[45px] h-[40px] mt-1 content-center text-lg font-bold cursor-pointer",children:["+"," "]})]}),f.task_type&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.task_type.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Priority"}),(0,a.jsx)("input",{type:"number",...b("priority"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.priority?"border-red-500":"border-gray-300"),placeholder:"Enter priority"}),f.priority&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.priority.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Assigned Employee"}),(0,a.jsxs)("select",{...b("emp"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.emp?"border-red-500":"border-gray-300"),disabled:U,children:[(0,a.jsx)("option",{value:"",children:"Select an employee (optional)"}),z&&z.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.emp&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.emp.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Department"}),(0,a.jsxs)("select",{...b("department_id"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.department_id?"border-red-500":"border-gray-300"),disabled:L,children:[(0,a.jsx)("option",{value:"",children:"Select a department (optional)"}),A&&A.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.department_id&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.department_id.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{...b("status"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.status?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("option",{value:"",children:"Select task status"}),I&&I.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("div",{onClick:()=>H(!0),className:"mt-1 border-gray-500 border-dashed border-2 text-center rounded-md w-[45px] h-[40px] content-center text-lg font-bold cursor-pointer",children:["+"," "]})]}),f.status&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.status.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Due Date"}),(0,a.jsx)("input",{type:"date",...b("due_date"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(f.due_date?"border-red-500":"border-gray-300")}),f.due_date&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:f.due_date.message})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ".concat(q?"opacity-50 cursor-not-allowed":""),disabled:q,children:q?m?"Updating...":"Creating...":m?"Update Task":"Create Task"}),N&&(0,a.jsx)("p",{className:"mt-2 text-center ".concat(N.includes("successfully")?"text-green-500":"text-red-500"),children:N})]})]}),(0,a.jsx)(x.Z,{isOpen:F,onClose:()=>H(!1)}),(0,a.jsx)(p.Z,{isOpen:M,onClose:()=>B(!1)}),(0,a.jsx)(r.Z,{open:k.open,message:k.message,severity:k.severity,onClose:()=>w(e=>({...e,open:!1}))})]})},y=s(5426),f=s(1942),g=s(8472),j=s(2649);let N=e=>new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});var v=e=>{var t,s,r;let{isOpen:l,onClose:n,taskData:d}=e,[i,o]=(0,c.useState)(""),[m,x]=(0,c.useState)(null),[p,h]=(0,c.useState)([]),b=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=async()=>{try{let e=await g.Z.get("http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/comment/").concat(d.id),{headers:{Authorization:"Bearer "+j.Z.get("access_token")}});h(e.data)}catch(e){console.error("Error fetching comments:",e)}};l&&e()},[l,d]);let y=async()=>{if(i.trim()||m)try{let e=await g.Z.post("http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/comment"),{content:i,taskId:null==d?void 0:d.id},{headers:{Authorization:"Bearer "+j.Z.get("access_token")}});h(t=>[...t,e.data]),o(""),x(null),b.current&&(b.current.value="")}catch(e){console.error("Error submitting comment:",e)}else alert("Please write a comment or attach a file before sending.")};if(!d)return null;let v=1==d.priority?"bg-red-100  text-red-600":2==d.priority?"bg-yellow-100  text-yellow-600":"bg-green-100  text-green-600";return(0,a.jsx)(u(),{isOpen:l,onRequestClose:n,ariaHideApp:!1,contentLabel:"Task Details",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-xl w-full relative",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"absolute top-4 right-4 text-gray-700 hover:text-red-500",children:(0,a.jsx)(f.aHS,{})}),(0,a.jsxs)("div",{className:"flex justify-between items-center my-5",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-[#1b1a40] text-lg font-bold",children:"Task Details"})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"bg-gray-100 px-4 py-2 rounded-2xl border-none text-gray-800 font-medium",children:d.status.name}),(0,a.jsx)("div",{className:"px-4 py-2 rounded-2xl border-none font-medium "+v,children:1==d.priority?"High":2==d.priority?"Medium":"Low"})]})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:d.name}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"font-bold mb-2 block",children:"Members"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[d.emp?(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#1b1a40] text-white flex items-center justify-center text-sm font-bold",children:d.emp.name.charAt(0).toUpperCase()}):(0,a.jsx)("span",{className:"text-gray-500",children:"No assigned employee"}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-300 text-white flex items-center justify-center text-sm font-bold",children:"AA"}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-300 text-white flex items-center justify-center text-sm font-bold",children:"MK"}),(0,a.jsx)("button",{className:"w-8 h-8 rounded-full bg-blue-100 text-[#1b1a40] flex items-center justify-center text-sm font-bold",children:"+"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"font-bold mb-2 block",children:"Description"}),(0,a.jsx)("div",{className:"bg-gray-100 p-4 rounded-md text-gray-700",children:d.description})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-bold",children:"Task Type:"}),(0,a.jsx)("p",{className:"mt-1 text-gray-600",children:d.task_type.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-bold",children:"Department:"}),(0,a.jsx)("p",{className:"mt-1 text-gray-600",children:(null===(t=d.emp)||void 0===t?void 0:t.department)?null===(r=d.emp)||void 0===r?void 0:null===(s=r.department)||void 0===s?void 0:s.name:"No department assigned"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"font-bold",children:"Due Date:"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:new Date(d.due_date).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"font-bold mb-2 block",children:"Comments"}),(0,a.jsx)("div",{className:"bg-white border shadow-md p-4 rounded-lg text-gray-700 space-y-2 h-40 overflow-y-auto ",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:p.length>0?p.map((e,t)=>(0,a.jsxs)("div",{className:"flex mb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-[#1b1a40] text-white rounded-full flex items-center justify-center mr-4",children:e.author.name.slice(0,1)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-900 font-semibold",children:e.author.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:N(e.createdAt)}),e.content&&(0,a.jsx)("div",{className:"bg-gray-100   rounded-md p-2 mt-2 text-sm",children:e.content}),e.files&&(0,a.jsx)("div",{className:"mt-2",children:e.files.map((e,t)=>(0,a.jsx)("div",{className:"bg-gray-200 text-gray-700 p-1 px-2 rounded-md inline-block mr-2 mb-1",children:e},t))})]})]},t)):(0,a.jsx)("p",{children:"No comments yet."})}),(0,a.jsxs)("div",{className:"mt-4 p-2 bg-white border rounded-md shadow-sm",children:[(0,a.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),className:"w-full mt-2 p-2 border-none outline-none focus:outline-none",placeholder:"Add a comment...",rows:2}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",ref:b,onChange:e=>{e.target.files&&e.target.files[0]&&x(e.target.files[0])},className:"hidden",id:"attach-file"}),(0,a.jsxs)("label",{htmlFor:"attach-file",className:"cursor-pointer text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(f.jLr,{className:"inline mr-1"})," Attach File"]}),m&&(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:m.name})]}),(0,a.jsxs)("button",{onClick:y,className:"bg-[#1b1a40] text-white px-3 py-1 rounded-md hover:bg-blue-600 flex items-center",children:[(0,a.jsx)(f.Y2X,{className:"mr-1"})," Send"]})]})]})]})]})})};let k=e=>{switch(e){case"1":return"bg-red-100 text-red-500";case"2":return"bg-yellow-100 text-yellow-500";case"3":return"bg-green-100 text-green-500";default:return"bg-blue-100 text-blue-600"}},w=e=>{switch(e){case"1":return"High";case"2":return"Medium";case"3":return"Low";default:return"Normal"}};var _=e=>{let{taskId:t,index:s,title:r,commentsCount:l,attachmentsCount:n,priority:d,task:i}=e,[o,m]=(0,c.useState)(!1);return(0,a.jsx)(y._l,{draggableId:t,index:s,children:e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,onClick:()=>m(!0),children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:r}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.ajU,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:l})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.jLr,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:n})]})]}),(0,a.jsx)("div",{className:"p-2 w-16 text-xs text-center font-bold rounded-full ".concat(k(d)),children:w(d)})]}),(0,a.jsx)(v,{isOpen:o,onClose:()=>m(!1),taskData:i})]})})},T=e=>{let{columnId:t,title:s,taskCount:r,tasks:l,setIsModalOpen:n}=e;return(0,a.jsx)(y.bK,{droppableId:t,children:e=>(0,a.jsxs)("div",{className:"bg-[#f0f4f9] rounded-xl shadow-md p-4 flex flex-col space-y-4 col-span-3",ref:e.innerRef,...e.droppableProps,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:s}),(0,a.jsx)("div",{className:"bg-white text-[#1b1a40] px-2 rounded-xl w-10 text-center shadow-md py-0.5 text-sm font-bold",children:r})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[l.map((e,t)=>(0,a.jsx)(_,{task:e,taskId:e.id,index:t,title:e.name,commentsCount:16,attachmentsCount:24,priority:e.priority+""},e.id)),(0,a.jsx)("div",{onClick:()=>{n(!0)},className:"rounded-xl shadow-md p-4 h-20 w-full border-dashed border-blue-300 border-2 text-center content-center text-xl font-bold text-blue-300 cursor-pointer",children:"+"}),e.placeholder]})]})})},q=s(468);let S=(e,t)=>{let s={};return t.forEach(e=>{s[e.id]=[]}),e.forEach(e=>{let t=e.status.id;s[t]?s[t].push(e):s.backlog.push(e)}),s},Z=async(e,t)=>{try{await g.Z.post("http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/tasks/update/").concat(e),{status:t},{headers:{Authorization:"Bearer "+j.Z.get("access_token")}})}catch(e){console.error("Failed to update task status",e)}};var C=e=>{let{selectedOption:t}=e,[s,l]=(0,c.useState)(!1),[d,i]=(0,c.useState)({open:!1,message:"",severity:"success"}),{data:o,isLoading:m}=(0,n.Z)({queryKey:["taskStatuses"],url:"http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/task-status/find-all"),setSnackbarConfig:i,nestedData:!0}),{data:u,isLoading:x}=(0,n.Z)({queryKey:["tasks",t],url:"http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/tasks/").concat(t),setSnackbarConfig:i,nestedData:!0}),[p,h]=(0,c.useState)({});(0,c.useEffect)(()=>{u&&o&&h(S(u,o))},[u,o]);let f=async e=>{let{destination:t,source:s}=e;if(!t||t.droppableId===s.droppableId&&t.index===s.index)return;let a=p[s.droppableId],r=p[t.droppableId];if(a===r){let e=Array.from(a),[r]=e.splice(s.index,1);e.splice(t.index,0,r),h({...p,[s.droppableId]:e})}else{let e=Array.from(a||[]),[l]=e.splice(s.index,1),n=Array.from(r||[]);n.splice(t.index,0,l),h({...p,[s.droppableId]:e,[t.droppableId]:n});let d=t.droppableId;try{await Z(l.id,d)}catch(e){console.error("Error updating task status:",e)}}};return x||m?(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:(0,a.jsx)(q.default,{size:100})}):u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z5,{onDragEnd:f,children:null==o?void 0:o.map(e=>{var t;return(0,a.jsx)(T,{columnId:e.id,title:e.name,taskCount:(null===(t=p[e.id])||void 0===t?void 0:t.length)||0,tasks:p[e.id]||[],setIsModalOpen:l},e.id)})}),(0,a.jsx)(b,{isOpen:s,onClose:()=>l(!1),taskData:null}),(0,a.jsx)(r.Z,{open:d.open,message:d.message,severity:d.severity,onClose:()=>i(e=>({...e,open:!1}))})]}):(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:"No Tasks"})}},9376:function(e,t,s){s.d(t,{s:function(){return d}});var a=s(3191),r=s(5524),l=s(8472),n=s(2649);let d=e=>{let{endpoint:t,onSuccessMessage:s,invalidateQueryKeys:d=[],options:i}=e,c=(0,a.NL)(),o=async e=>(await l.Z.post("http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com").concat(t),e,{headers:{Authorization:"Bearer ".concat(n.Z.get("access_token"))}})).data;return(0,r.D)({mutationFn:o,onSuccess:e=>{s&&console.log(s,e),d.forEach(e=>{c.invalidateQueries(e)})},onError:e=>{console.error("Error during the create/add request:",e)},...i})}},7300:function(e,t,s){var a=s(932),r=s(8472),l=s(2649);t.Z=e=>{let{queryKey:t,url:s,setSnackbarConfig:n,nestedData:d=!1,...i}=e;return(0,a.a)({queryKey:t,queryFn:async()=>{try{let e=await r.Z.get(s,{headers:{Authorization:"Bearer ".concat(l.Z.get("access_token"))}});return d?e.data.data:e.data}catch(e){throw r.Z.isAxiosError(e)&&e.response?n({open:!0,message:"Error: ".concat(e.response.data.message||"An error occurred"),severity:"error"}):n({open:!0,message:"Network error. Please try again later.",severity:"error"}),e}},retry:2,...i})}},2626:function(e,t,s){s.d(t,{KV:function(){return l},T$:function(){return r},_v:function(){return d},lj:function(){return n}});var a=s(4245);let r=a.Ry().shape({name:a.Z_().required("Task name is required"),description:a.Z_().required("Description is required"),task_type:a.Z_().required("Task type is required"),priority:a.Rx().required("Priority is required").typeError("Priority must be a number"),emp:a.Z_().nullable(),department_id:a.Z_().nullable(),status:a.Z_().required("Task status is required"),due_date:a.hT().required("Due date is required").typeError("Invalid date format"),files:a.IX().of(a.Z_()),isRecurring:a.O7(),intervalInDays:a.Rx().when("isRecurring",{is:!0,then:e=>e.required("Interval in days is required").min(1,"Interval must be at least 1 day"),otherwise:e=>e.nullable()}),end_date:a.hT().when("isRecurring",{is:!0,then:e=>e.required("End date is required").typeError("Invalid date format"),otherwise:e=>e.nullable()})}),l=a.Ry().shape({name:a.Z_().required("Task name is required"),description:a.Z_().required("Description is required"),task_type:a.Z_().required("Task type is required"),priority:a.Rx().required("Priority is required").typeError("Priority must be a number"),emp:a.Z_().nullable(),department_id:a.Z_().nullable(),status:a.Z_().required("Task status is required"),due_date:a.hT().required("Due date is required").typeError("Invalid date format"),files:a.IX().of(a.Z_())}),n=a.Ry().shape({name:a.Z_().required("Task status name is required"),description:a.Z_().required("Description is required")}),d=a.Ry().shape({name:a.Z_().required("Task type name is required"),description:a.Z_().required("Description is required")})}}]);