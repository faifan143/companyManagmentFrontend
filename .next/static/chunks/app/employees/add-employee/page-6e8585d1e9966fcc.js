(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{3407:function(e,t,s){Promise.resolve().then(s.bind(s,4532))},4532:function(e,t,s){"use strict";s.r(t);var a=s(7437),r=s(9671),i=s(2299),n=s(9376),o=s(7300),l=s(8379),d=s(7753),c=s(2265),u=s(9343);let m="ec2-35-173-139-149.compute-1.amazonaws.com";t.default=()=>{let[e,t]=(0,c.useState)(null),{register:s,handleSubmit:p,control:h,formState:{errors:x},reset:b,setValue:y,getValues:f}=(0,u.cI)({resolver:(0,d.X)(l.d),defaultValues:e||{}});(0,c.useEffect)(()=>{console.log("validation error : ",x)},[x]),(0,c.useEffect)(()=>{let e=sessionStorage.getItem("employeeData");if(e){let s=JSON.parse(e);t(s),b(s)}},[b]);let[g,v]=(0,c.useState)({open:!1,message:"",severity:"success"}),{data:j}=(0,o.Z)({queryKey:["departments"],url:"http://".concat(m,"/department/get-departments"),setSnackbarConfig:v}),{data:N}=(0,o.Z)({queryKey:["jobTitles"],url:"http://".concat(m,"/job-titles/get-job-titles"),setSnackbarConfig:v}),_=e?"/emp/update/".concat(e.id):"/emp/create",{mutate:w,isPending:q}=(0,n.s)({endpoint:_,onSuccessMessage:"Employee added successfully!",invalidateQueryKeys:["employees"]}),k=async t=>{console.log(" data  : ",t),w(t,{onSuccess:()=>{sessionStorage.clear(),v({open:!0,message:e?"Employee updated successfully!":"Employee created successfully!",severity:"success"}),b()},onError:()=>{v({open:!0,message:"An error occurred. Please try again.",severity:"error"})}})},{fields:C,append:E,remove:Z}=(0,u.Dq)({control:h,name:"legal_documents"}),{fields:D,append:R,remove:A}=(0,u.Dq)({control:h,name:"certifications"}),{fields:S,append:M,remove:I}=(0,u.Dq)({control:h,name:"allowances"}),{fields:O,append:P,remove:X}=(0,u.Dq)({control:h,name:"incentives"}),{fields:T,append:Y,remove:B}=(0,u.Dq)({control:h,name:"bank_accounts"}),{fields:G,append:F,remove:K}=(0,u.Dq)({control:h,name:"evaluations"}),L=(e,t,s)=>{var a;let r=(null===(a=e.target.files)||void 0===a?void 0:a[0])||null;r&&("legal_documents"===s?y("legal_documents.".concat(t,".file"),r.name||"",{shouldValidate:!0}):"certifications"===s&&y("certifications.".concat(t,".file"),r.name||"",{shouldValidate:!0}))};return(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg col-span-12 w-full relative",children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-bold mb-6",children:e?"Update Employee":"Create Employee"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:p(k),encType:"multipart/form-data",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Name"}),(0,a.jsx)("input",{type:"text",...s("name"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.name?"border-red-500":"border-gray-300"),placeholder:"Enter employee name"}),x.name&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Email"}),(0,a.jsx)("input",{type:"text",...s("email"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.email?"border-red-500":"border-gray-300"),placeholder:"Enter Employee Email"}),x.email&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Phone"}),(0,a.jsx)("input",{type:"text",...s("phone"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.phone?"border-red-500":"border-gray-300"),placeholder:"Enter Employee phone"}),x.phone&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.phone.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Password"}),(0,a.jsx)("input",{type:"text",...s("password"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.password?"border-red-500":"border-gray-300"),placeholder:"Enter Employee Password"}),x.password&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.password.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"National ID"}),(0,a.jsx)("input",{type:"text",...s("national_id"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.national_id?"border-red-500":"border-gray-300"),placeholder:"Enter national ID"}),x.national_id&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.national_id.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Address"}),(0,a.jsx)("input",{type:"text",...s("address"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.address?"border-red-500":"border-gray-300"),placeholder:"Enter Address"}),x.address&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.address.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Contact Emergency"}),(0,a.jsx)("input",{type:"text",...s("emergency_contact"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.address?"border-red-500":"border-gray-300"),placeholder:"Enter Address"}),x.address&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.address.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Date Of Birth"}),(0,a.jsx)("input",{type:"date",...s("dob"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.dob?"border-red-500":"border-gray-300"),placeholder:"Enter employment date"}),x.dob&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.dob.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Gender"}),(0,a.jsxs)("select",{...s("gender"),className:"w-full px-4 py-2 mt-1 rounded-lg   placeholder-textSecondary focus:outline-none focus:ring-2 focus:ring-accent border ".concat(x.gender?"border-high":"border-border"),children:[(0,a.jsx)("option",{value:"",children:"Select a gender"}),["male","female","undefined"].map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]}),x.gender&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.gender.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Marital Status"}),(0,a.jsxs)("select",{...s("marital_status"),className:"w-full px-4 py-2 mt-1 rounded-lg   placeholder-textSecondary focus:outline-none focus:ring-2 focus:ring-accent border ".concat(x.marital_status?"border-high":"border-border"),children:[(0,a.jsx)("option",{value:"",children:"Select a marital status"}),["single","married"].map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]}),x.marital_status&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.marital_status.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Employment Date"}),(0,a.jsx)("input",{type:"date",...s("employment_date"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.employment_date?"border-red-500":"border-gray-300"),placeholder:"Enter employment date"}),x.employment_date&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.employment_date.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Base Salary"}),(0,a.jsx)("input",{type:"number",...s("base_salary"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.base_salary?"border-red-500":"border-gray-300"),placeholder:"Enter base salary"}),x.base_salary&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.base_salary.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Department"}),(0,a.jsxs)("select",{...s("department_id"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.department_id?"border-red-500":"border-gray-300"),onChange:e=>y("department_id",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select a department"}),j&&j.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.department_id&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.department_id.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Job Title"}),(0,a.jsxs)("select",{...s("job_id"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.job_id?"border-red-500":"border-gray-300"),onChange:e=>y("job_id",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select a job title"}),N&&N.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]}),x.job_id&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.job_id.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm font-medium",children:"Job Tasks"}),(0,a.jsx)("input",{type:"text",...s("job_tasks"),className:"w-full px-4 py-2 mt-1 rounded-lg border ".concat(x.job_tasks?"border-red-500":"border-gray-300"),placeholder:"Enter job tasks"}),x.job_tasks&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:x.job_tasks.message})]}),C.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Legal Document ",t+1]}),(0,a.jsx)("input",{type:"text",...s("legal_documents.".concat(t,".name")),placeholder:"Document Name",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"date",...s("legal_documents.".concat(t,".validity")),className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"file",onChange:e=>L(e,t,"legal_documents"),className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{console.log("Removing document at index",t),Z(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>E({name:"",validity:"",file:null}),className:"text-blue-500 block text-sm",children:"Add Legal Document"}),D.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Certification ",t+1]}),(0,a.jsx)("input",{type:"text",...s("certifications.".concat(t,".certificate_name")),placeholder:"Certification Name",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"date",...s("certifications.".concat(t,".date")),className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"text",...s("certifications.".concat(t,".grade")),placeholder:"Certification Grade",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"file",onChange:e=>L(e,t,"certifications"),className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{console.log("Removing document at index",t),A(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>R({certificate_name:"",date:"",grade:"",file:null}),className:"text-blue-500 block text-sm",children:"Add Certification"}),S.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Allowance ",t+1]}),(0,a.jsx)("input",{type:"text",...s("allowances.".concat(t,".allowance_type")),placeholder:"Allowance Type",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"number",...s("allowances.".concat(t,".amount")),placeholder:"Amount",className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{I(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>M({allowance_type:"",amount:0}),className:"text-blue-500 block text-sm",children:"Add Allowance"}),O.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Incentive ",t+1]}),(0,a.jsx)("input",{type:"text",...s("incentives.".concat(t,".description")),placeholder:"Description",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"number",...s("incentives.".concat(t,".amount")),placeholder:"Amount",className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{X(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>P({description:"",amount:0}),className:"text-blue-500 block text-sm",children:"Add Incentive"}),T.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Bank Account ",t+1]}),(0,a.jsx)("input",{type:"text",...s("bank_accounts.".concat(t,".bank_name")),placeholder:"Bank Name",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("input",{type:"text",...s("bank_accounts.".concat(t,".account_number")),placeholder:"Account Number",className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{B(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>Y({bank_name:"",account_number:""}),className:"text-blue-500 block text-sm",children:"Add Bank Account"}),G.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("label",{className:"block text-gray-600 text-sm font-medium",children:["Evaluation ",t+1]}),(0,a.jsx)("input",{type:"text",...s("evaluations.".concat(t,".evaluation_type")),placeholder:"Evaluation Type",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("textarea",{...s("evaluations.".concat(t,".description")),placeholder:"Description",className:"w-full px-4 py-2 mt-1 rounded-lg border"}),(0,a.jsx)("textarea",{...s("evaluations.".concat(t,".plan")),placeholder:"Plan",className:"w-full px-4 py-2 mt-1 rounded-lg border"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{K(t),b(f())},className:"text-white bg-red-500 font-bold  px-4 py-2 shadow-md rounded-md",children:"X"})]},e.id)),(0,a.jsx)("button",{type:"button",onClick:()=>F({evaluation_type:"",description:"",plan:""}),className:"text-blue-500 block text-sm",children:"Add Evaluation"}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ".concat(q?"opacity-50 cursor-not-allowed":""),disabled:q,children:q?e?"Updating...":"Creating...":e?"Update Employee":"Create Employee"})]})]}),(0,a.jsx)(r.Z,{open:g.open,message:g.message,severity:g.severity,onClose:()=>v(e=>({...e,open:!1}))})]})}},9671:function(e,t,s){"use strict";var a=s(7437);s(2265);var r=s(9175),i=s(5740);t.Z=e=>{let{open:t,message:s,severity:n,onClose:o}=e,l=(e,t)=>{"clickaway"!==t&&o()};return(0,a.jsx)(r.Z,{open:t,autoHideDuration:2e3,onClose:l,children:(0,a.jsx)(i.Z,{onClose:l,severity:n,variant:"filled",sx:{width:"100%"},children:s})})}},2299:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{children:t,extraStyle:s}=e;return(0,a.jsx)("div",{className:"sm:w-full mobile-grid sm:desktop-grid  "+s,children:t})}},9376:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var a=s(3191),r=s(5524),i=s(8472),n=s(2649);let o=e=>{let{endpoint:t,onSuccessMessage:s,invalidateQueryKeys:o=[],options:l}=e,d=(0,a.NL)(),c=async e=>(await i.Z.post("http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com").concat(t),e,{headers:{Authorization:"Bearer ".concat(n.Z.get("access_token"))}})).data;return(0,r.D)({mutationFn:c,onSuccess:e=>{s&&console.log(s,e),o.forEach(e=>{d.invalidateQueries(e)})},onError:e=>{console.error("Error during the create/add request:",e)},...l})}},7300:function(e,t,s){"use strict";var a=s(932),r=s(8472),i=s(2649);t.Z=e=>{let{queryKey:t,url:s,setSnackbarConfig:n,nestedData:o=!1,...l}=e;return(0,a.a)({queryKey:t,queryFn:async()=>{try{let e=await r.Z.get(s,{headers:{Authorization:"Bearer ".concat(i.Z.get("access_token"))}});return o?e.data.data:e.data}catch(e){throw r.Z.isAxiosError(e)&&e.response?n({open:!0,message:"Error: ".concat(e.response.data.message||"An error occurred"),severity:"error"}):n({open:!0,message:"Network error. Please try again later.",severity:"error"}),e}},retry:2,...l})}},8379:function(e,t,s){"use strict";s.d(t,{Z:function(){return i},d:function(){return r}});var a=s(4245);let r=a.Ry().shape({id:a.Z_().optional(),name:a.Z_().required("Employee name is required"),national_id:a.Z_().required("National Id is required"),gender:a.Z_().required("Gender is required"),marital_status:a.Z_().required("Marital status is required"),address:a.Z_().required("Address is required"),employment_date:a.Z_().required("Employment date is required").matches(/^\d{4}-\d{2}-\d{2}$/,"Employment date must be in YYYY-MM-DD format"),base_salary:a.Rx().required("Base salary is required"),dob:a.Z_().required("Date of birth is required").matches(/^\d{4}-\d{2}-\d{2}$/,"Date of birth must be in YYYY-MM-DD format"),phone:a.Z_().required("Phone number is required"),email:a.Z_().required("Email is required").email("Invalid email format"),password:a.Z_().required("password is required"),department_id:a.Z_().required("Department ID is required"),job_id:a.Z_().required("Job ID is required"),job_tasks:a.Z_().required("Job tasks is required"),emergency_contact:a.Z_().required("emergency contact is required"),legal_documents:a.IX().of(a.Ry().shape({name:a.Z_().required("Document name is required"),validity:a.Z_().nullable(),file:a.Z_().nullable()})).optional(),certifications:a.IX().of(a.Ry().shape({certificate_name:a.Z_().required("Certificate name is required"),date:a.Z_().nullable(),grade:a.Z_().required("Grade is required"),file:a.Z_().nullable()})).optional(),allowances:a.IX().of(a.Ry().shape({allowance_type:a.Z_().required("Allowance type is required"),amount:a.Rx().required("Allowance amount is required").positive("Amount must be a positive number")})).optional(),incentives:a.IX().of(a.Ry().shape({description:a.Z_().required("Incentive description is required"),amount:a.Rx().required("Incentive amount is required").positive("Amount must be a positive number")})).optional(),bank_accounts:a.IX().of(a.Ry().shape({bank_name:a.Z_().required("Bank name is required"),account_number:a.Z_().required("Account number is required").matches(/^\d+$/,"Account number must contain only digits")})).optional(),evaluations:a.IX().of(a.Ry().shape({evaluation_type:a.Z_().required("Evaluation type is required"),description:a.Z_().required("Evaluation description is required"),plan:a.Z_().required("Plan is required")})).optional()}),i=a.Ry().shape({name:a.Z_().required("Employee name is required"),dob:a.hT().required("Date of birth is required").typeError("Invalid date format"),phone:a.Z_().required("Phone number is required"),password:a.Z_(),email:a.Z_().required("Email is required").email("Invalid email format"),address:a.Z_().required("Address is required"),department_id:a.Z_().required("Department ID is required"),job_id:a.Z_().required("Job ID is required")})},2812:function(e,t,s){"use strict";s.d(t,{R:function(){return o},m:function(){return n}});var a=s(9948),r=s(3494),i=s(924),n=class extends r.F{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){this.#s=(0,i.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t="pending"===this.state.status,s=!this.#s.canStart();try{if(!t){this.#a({type:"pending",variables:e,isPaused:s}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:s})}let a=await this.#s.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#a({type:"success",data:a}),a}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#a({type:"error",error:t})}}finally{this.#t.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),a.V.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5524:function(e,t,s){"use strict";s.d(t,{D:function(){return u}});var a=s(2265),r=s(2812),i=s(9948),n=s(9010),o=s(6298),l=class extends n.l{#r;#i=void 0;#n;#o;constructor(e,t){super(),this.#r=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#r.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#d(e)}getCurrentResult(){return this.#i}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#l(),this.#d()}mutate(e,t){return this.#o=t,this.#n?.removeObserver(this),this.#n=this.#r.getMutationCache().build(this.#r,this.options),this.#n.addObserver(this),this.#n.execute(e)}#l(){let e=this.#n?.state??(0,r.R)();this.#i={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#d(e){i.V.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#i.variables,s=this.#i.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,s),this.#o.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#o.onError?.(e.error,t,s),this.#o.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#i)})})}},d=s(3191),c=s(7832);function u(e,t){let s=(0,d.NL)(t),[r]=a.useState(()=>new l(s,e));a.useEffect(()=>{r.setOptions(e)},[r,e]);let n=a.useSyncExternalStore(a.useCallback(e=>r.subscribe(i.V.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=a.useCallback((e,t)=>{r.mutate(e,t).catch(c.Z)},[r]);if(n.error&&(0,c.L)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}}},function(e){e.O(0,[7034,5907,4186,1336,2280,932,2971,7023,1744],function(){return e(e.s=3407)}),_N_E=e.O()}]);