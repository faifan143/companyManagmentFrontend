(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9109],{5155:function(e,t,s){Promise.resolve().then(s.bind(s,9443))},9443:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),n=s(2299),i=s(7300),l=s(6716),a=s(468),c=s(5056),o=s(6960),d=s(385),x=s(8784),p=s(6548),m=s(6463),u=s(2265),h=s(9671),j=e=>{let{selectedOption:t}=e,s=(0,l.D)("admin"),[n,j]=(0,u.useState)({open:!1,message:"",severity:"success"}),{data:b,isLoading:f,error:g}=(0,i.Z)({queryKey:["jobTitles",t],url:"view"===t?"http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/job-titles/view"):"http://".concat("ec2-35-173-139-149.compute-1.amazonaws.com","/job-titles/get-job-titles"),setSnackbarConfig:j}),y=(0,m.useRouter)(),[v,N]=(0,u.useState)(!1),[w,Z]=(0,u.useState)([]),C=e=>{Z(e),N(!0)},k=()=>{N(!1),Z([])},_=e=>{sessionStorage.setItem("jobData",JSON.stringify({...e,department_id:e.department.id})),y.push("/jobs/add-title")};return f?(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:(0,r.jsx)(a.default,{size:100})}):b&&0!==b.length?g?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("p",{className:"text-xl text-red-500",children:"Failed to load job titles."})}):(0,r.jsxs)("div",{className:"bg-[#f0f4f9] rounded-xl shadow-md p-4 flex flex-col space-y-4 col-span-12",children:[(0,r.jsx)("div",{className:"overflow-x-auto rounded-xl shadow-md",children:(0,r.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-md",children:[(0,r.jsx)("thead",{className:"bg-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Name"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Title"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Grade Level"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Description"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Responsibilities"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Permissions"}),(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Department ID"}),s&&(0,r.jsx)("th",{className:"text-center text-[#1b1a40] py-3 px-4 uppercase font-semibold text-sm",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.name}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.title}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.grade_level}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.description}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.responsibilities.length>0?(0,r.jsx)("ul",{className:"list-disc ml-4",children:e.responsibilities.map((e,t)=>(0,r.jsx)("li",{children:e},t))}):"N/A"}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.permissions&&e.permissions.length>3?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"list-disc ml-4",children:e.permissions.slice(0,3).map((e,t)=>(0,r.jsx)("li",{children:e},t))}),(0,r.jsx)("button",{className:"text-blue-500 underline",onClick:()=>C(e.permissions),children:"Show More"})]}):(0,r.jsx)("ul",{className:"list-disc ml-4",children:e.permissions.map((e,t)=>(0,r.jsx)("li",{children:e},t))})}),(0,r.jsx)("td",{className:"py-3 px-4 text-center",children:e.department&&e.department.name}),s&&(0,r.jsxs)("td",{className:"py-3 px-4 flex space-x-2",children:[(0,r.jsx)("div",{onClick:()=>_(e),className:"cursor-pointer p-2 w-16 text-xs text-center font-bold rounded-full bg-green-100 hover:bg-green-500 hover:text-green-100 text-green-500",children:"Edit"}),(0,r.jsx)("div",{className:"cursor-pointer p-2 w-16 text-xs text-center font-bold rounded-full bg-red-100 text-red-500 hover:text-red-100 hover:bg-red-500",children:"Delete"})]})]},e.id))})]})}),(0,r.jsxs)(c.Z,{open:v,onClose:k,maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(o.Z,{children:"Permissions"}),(0,r.jsx)(d.Z,{children:(0,r.jsx)("ul",{className:"list-disc ml-4",children:w.map((e,t)=>(0,r.jsx)("li",{children:e},t))})}),(0,r.jsx)(x.Z,{children:(0,r.jsx)(p.Z,{onClick:k,color:"primary",children:"Close"})})]}),(0,r.jsx)(h.Z,{open:n.open,message:n.message,severity:n.severity,onClose:()=>j(e=>({...e,open:!1}))})]}):(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:"No Job Titles Found"})},b=()=>{let[e,t]=(0,u.useState)("get-job-titles"),s=(0,m.useRouter)(),i=(0,l.D)("admin");return(0,r.jsxs)(n.Z,{children:[(0,r.jsxs)("div",{className:"col-span-full flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center",children:"Job Titles"}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-5",children:[(0,r.jsxs)("select",{className:"bg-white border border-gray-300 rounded-lg px-4 py-2 focus:outline-none transition duration-200",value:e,onChange:e=>t(e.target.value),children:[i&&(0,r.jsx)("option",{value:"get-job-titles",children:"All Job Titles"}),(0,l.T)(["job_title_view_specific"])&&(0,r.jsx)("option",{value:"view",children:"Accessible Job Titles"})]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"bg-[#1b1a40] text-white px-6 py-2 rounded-lg hover:bg-opacity-90 transition duration-200",onClick:()=>{s.push("/jobs/add-category")},children:"Add Job Category"}),(0,r.jsx)("button",{className:"bg-[#1b1a40] text-white px-6 py-2 rounded-lg hover:bg-opacity-90 transition duration-200",onClick:()=>{s.push("/jobs/add-title")},children:"Add Job Title"})]})]})]}),(0,r.jsx)(j,{selectedOption:e})]})}},9671:function(e,t,s){"use strict";var r=s(7437);s(2265);var n=s(9175),i=s(5740);t.Z=e=>{let{open:t,message:s,severity:l,onClose:a}=e,c=(e,t)=>{"clickaway"!==t&&a()};return(0,r.jsx)(n.Z,{open:t,autoHideDuration:2e3,onClose:c,children:(0,r.jsx)(i.Z,{onClose:c,severity:l,variant:"filled",sx:{width:"100%"},children:s})})}},2299:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{children:t,extraStyle:s}=e;return(0,r.jsx)("div",{className:"sm:w-full mobile-grid sm:desktop-grid  "+s,children:t})}},7300:function(e,t,s){"use strict";var r=s(932),n=s(8472),i=s(2649);t.Z=e=>{let{queryKey:t,url:s,setSnackbarConfig:l,nestedData:a=!1,...c}=e;return(0,r.a)({queryKey:t,queryFn:async()=>{try{let e=await n.Z.get(s,{headers:{Authorization:"Bearer ".concat(i.Z.get("access_token"))}});return a?e.data.data:e.data}catch(e){throw n.Z.isAxiosError(e)&&e.response?l({open:!0,message:"Error: ".concat(e.response.data.message||"An error occurred"),severity:"error"}):l({open:!0,message:"Network error. Please try again later.",severity:"error"}),e}},retry:2,...c})}},6716:function(e,t,s){"use strict";s.d(t,{D:function(){return i},T:function(){return n}});var r=s(1444);function n(e){let t=(0,r.v9)(e=>{var t;return(null===(t=e.user.userInfo)||void 0===t?void 0:t.job.permissions)||[]});return e.some(e=>t.includes(e))}function i(e){return e==(0,r.v9)(e=>e.user.role)}}},function(e){e.O(0,[7034,5907,4186,1336,932,2427,4494,2971,7023,1744],function(){return e(e.s=5155)}),_N_E=e.O()}]);