exports.id=260,exports.ids=[260],exports.modules={8359:()=>{},3739:()=>{},7121:(e,t,s)=>{Promise.resolve().then(s.bind(s,8139))},8904:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6042:(e,t,s)=>{Promise.resolve().then(s.bind(s,7155))},7155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var r=s(326),l=s(7577),a=s.n(l),i=s(8562),n=s(12);i.ZP.use(n.Db).init({resources:{en:{translation:{Welcome:"Welcome and react-i18next"}},ar:{translation:{Welcome:"هلا "}}},lng:"ar",interpolation:{escapeValue:!1}});let o=i.ZP,d=({children:e})=>r.jsx(n.a3,{i18n:o,children:e});var c=s(2852),u=s(4976);function h({children:e}){let[t]=a().useState(new c.S);return r.jsx(u.aH,{client:t,children:e})}var m=s(712),x=s(1549),p=s(1908),f=s(1762),g=s(4006);let b={key:"root",storage:p.Z,whitelist:["counter","user"]},v=(0,m.UY)({user:g.ZP}),j=(0,f.OJ)(b,v),w=(0,x.xC)({reducer:j,middleware:e=>e({serializableCheck:{ignoredActions:[f._P,f.I2,f.E7,f.ex,f.e,f.Nz]}})}),y=(0,f.p5)(w);var N=s(5842),k=s(2618);let _=({children:e})=>r.jsx(N.zt,{store:w,children:r.jsx(k.r,{persistor:y,children:e})}),C=({children:e})=>r.jsx(_,{children:r.jsx(h,{children:r.jsx(d,{children:e})})});var P=s(6562),S=s(5047),Z=s(9331);let I=[{label:"Home",icon:Z.tv,path:"/home",requiredPermissions:[]},{label:"Tasks Management",icon:Z.Fl,path:"/tasks",requiredPermissions:["task_search_and_view"]},{label:"Employees Management",icon:Z.Kc,path:"/employees",requiredPermissions:["emp_search_and_view"]},{label:"Departments Management",icon:Z.LM,path:"/departments",requiredPermissions:["department_search_and_view"]},{label:"Job Titles Management",icon:Z.hO,path:"/jobs",requiredPermissions:["job_title_search_and_view"]}];var W=s(6226),z=s(4173),A=s.n(z),H=s(622),M=s(6215),E=s(2027),q=s(4099);let F=e=>{let[t,s]=(0,l.useState)([]),r=async()=>{let s=t.map(e=>({fileName:e.name,contentType:e.type})),r=await q.Z.post(e,{files:s},{headers:{Authorization:`Bearer ${P.Z.get("access_token")}`}}),l=r.data.files.map(e=>e.uploadUrl),i=r.data.files.map(e=>e.downloadUrl.split("?")[0]);for(let[e,s]of l.entries()){let r=t[e],l=await a(r);await q.Z.put(s,l,{headers:{"Content-Type":r.type}})}return i},a=e=>new Promise((t,s)=>{let r=new FileReader;r.onloadend=()=>r.result?t(r.result):s("Failed to read file"),r.onerror=()=>s(r.error),r.readAsArrayBuffer(e)});return{selectedFiles:t,handleFileChange:(e,r)=>{let l=[...t];r?l[e]=r:l.splice(e,1),s(l)},uploadFiles:r}},R=({isOpen:e,onClose:t})=>{let[s,a]=(0,l.useState)([]),[i,n]=(0,l.useState)(""),o=(0,l.useRef)(null),{selectedFiles:d,handleFileChange:c,uploadFiles:u}=F("http://ec2-35-173-139-149.compute-1.amazonaws.com/upload"),{selector:h}=(0,E.Sc)(e=>e.user);(0,l.useEffect)(()=>{let t=e=>{a(t=>[...t,e])};return M.W.on("receiveCommunication",t),e&&m(),()=>{M.W.off("receiveCommunication",t)}},[e]);let m=async()=>{try{let e=await q.Z.get("http://ec2-35-173-139-149.compute-1.amazonaws.com/internal-communications/chats",{headers:{Authorization:`Bearer ${P.Z.get("access_token")}`}});console.log(e),a(e.data)}catch(e){console.error("Error fetching initial messages:",e)}},x=async()=>{if(i.trim()||d.length>0){let e=[];d.length>0&&(e=await u());let t={emp:"ME",sender_Id:h.userInfo.id,department:h.userInfo.department.name,message:i,date:new Date,files:e};M.W.emit("send-message",t),n(""),o.current&&(o.current.value="")}else alert("Please write a comment or attach a file before sending.")};return r.jsx(A(),{isOpen:e,onRequestClose:t,ariaHideApp:!1,className:"fixed right-0 top-0 flex items-center justify-center w-[450px]  p-4 h-full",overlayClassName:"fixed inset-0 bg-black bg-opacity-50",children:h.userInfo&&h.userInfo.department&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full relative h-full",children:[(0,r.jsxs)("h2",{className:"text-xl  text-right font-bold mb-4",children:["محادثة ",h.userInfo?.department.name]}),r.jsx("div",{className:"overflow-y-auto pb-10",style:{maxHeight:"90%",scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map((e,t)=>(0,r.jsxs)("div",{className:"flex mb-4",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-[#1b1a40] text-white rounded-full flex items-center justify-center mr-4",children:e.emp.charAt(0)}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-900 font-semibold",children:e.emp}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleTimeString()}),r.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded-md shadow-md",children:e.message}),e.files&&e.files.length>0&&r.jsx("div",{className:"mt-2",children:e.files.map((e,t)=>r.jsx("div",{className:"bg-gray-200 text-gray-700 p-1 px-2 rounded-md inline-block mr-2 mb-1",children:e},t))})]})]},t))}),(0,r.jsxs)("div",{className:"bg-white flex items-center my-4 space-x-3 absolute bottom-0 w-[90%] p-2 border rounded-md resize-none focus:outline-none",children:[r.jsx("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Write a comment...",className:"w-[100%] resize-none focus:outline-none"}),r.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:r.jsx(H.jLr,{className:"text-gray-500 hover:text-gray-700"})}),r.jsx("input",{id:"file-upload",ref:o,type:"file",onChange:e=>c(d.length,e.target.files?e.target.files[0]:null),className:"hidden"}),r.jsx("button",{onClick:x,className:"bg-[#1b1a40] p-2 rounded-md text-white",children:r.jsx(H.Y2X,{})})]})]})})},L=({icon:e,label:t,isExpanded:s,isSelected:l,onClick:i})=>{let n=a().cloneElement(r.jsx(W.default,{src:e,alt:"home icon",width:20,height:20}),{color:"white"});return(0,r.jsxs)("div",{onClick:i,className:`flex cursor-pointer items-center text-white ${s?"justify-start":"justify-center"} relative p-2`,children:[l&&r.jsx("div",{className:"absolute inset-0 bg-[#413d99] rounded-md",style:{padding:"6px"}}),(0,r.jsxs)("div",{className:"relative z-10 flex items-center",children:[n,s&&r.jsx("p",{className:"ml-2",children:t})]})]})},O=({isExpanded:e,setIsExpanded:t})=>{let s=(0,N.v9)(e=>e.user.userInfo?.job.permissions),[a,i]=(0,l.useState)(!1),n=(0,S.useRouter)(),[o,d]=(0,l.useState)(()=>localStorage.getItem("selectedTab")||"/home"),c=e=>{d(e),localStorage.setItem("selectedTab",e),n.push(e)},u=s?I.filter(e=>e.requiredPermissions.every(e=>s.includes(e))):[];return(0,r.jsxs)("div",{className:`shadow-md p-5 mr-5 fixed top-0 bottom-0 transition-width duration-300 bg-[#1b1a40] ${e?"w-[350px]":"w-[92px]"}`,children:[(0,r.jsxs)("div",{className:"relative w-[34px] h-[34px] p-1 cursor-pointer flex items-center text-xl font-bold gap-4 text-white text-nowrap",onClick:()=>{t(e=>!e)},children:[r.jsx("div",{className:"font-bold text-white bg-[#413d99] rounded-md shadow-md p-2",children:"CM"}),e&&" Company Manager"]}),(0,r.jsxs)("div",{className:"sidebar flex flex-col space-y-4 py-4",children:[r.jsx("div",{className:"h-[1px] w-full bg-slate-200"}),u.map(t=>r.jsx(L,{icon:t.icon,label:t.label,isExpanded:e,isSelected:o===t.path,onClick:()=>c(t.path)},t.label)),r.jsx("div",{className:"h-[1px] w-full bg-slate-200"}),r.jsx(L,{icon:Z.qZ,label:"Department Chat",isExpanded:e,isSelected:a,onClick:()=>i(e=>!e)}),r.jsx(R,{isOpen:a,onClose:()=>i(!1)})]})]})};var T=s(4660);let D=()=>{let e=(0,N.v9)(e=>e.user.userInfo),{dispatch:t}=(0,E.Sc)(e=>e.user),s=e?e.name.charAt(0).toUpperCase():"G",[a,i]=(0,l.useState)(!1),n=(0,S.useRouter)();return r.jsx(T.Z,{children:(0,r.jsxs)("header",{className:"flex justify-between items-center flex-col gap-[15px] sm:flex-row col-span-4 sm:col-span-12  bg-white py-[24px] ",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 cursor-pointer",onClick:()=>n.push("/home"),children:r.jsx(H.xng,{className:"text-[#1b1a40]"})}),r.jsx("div",{className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 cursor-pointer",children:r.jsx(H.uOL,{className:"text-[#1b1a40]"})}),r.jsx("div",{className:"bg-slate-100 rounded-md shadow-sm p-2 flex",children:r.jsx("input",{type:"search",name:"search-text",placeholder:"Search",className:"border-none outline-none bg-transparent px-1"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"relative p-2 bg-blue-100 rounded-full hover:bg-blue-200 cursor-pointer",children:[r.jsx(H.Z3q,{className:"text-[#1b1a40]"}),r.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 bg-green-500 rounded-full"})]}),r.jsx("div",{className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 cursor-pointer",children:r.jsx(H.MXt,{className:"text-[#1b1a40]"})}),r.jsx("div",{className:"p-2 bg-blue-100 rounded-full hover:bg-blue-200 cursor-pointer",children:r.jsx(H.p4t,{className:"text-[#1b1a40]"})}),r.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-red-300 cursor-pointer text-white font-bold text-lg",onClick:()=>{i(!a)},children:s}),a&&r.jsx("div",{className:"absolute top-[20px]  z-10 mt-12 w-32 bg-white shadow-md rounded-lg border border-gray-200",children:(0,r.jsxs)("ul",{className:"flex flex-col text-gray-700",children:[r.jsx("li",{onClick:()=>{console.log("Profile clicked"),i(!1)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"Profile"}),r.jsx("li",{onClick:()=>{t((0,g.kS)()),n.replace("/")},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"Logout"})]})})]})]})})};function U({children:e}){(0,S.useRouter)(),(0,S.usePathname)();let[t,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(!1);return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"h-[100dvh] w-full",children:r.jsx("div",{className:"flex h-full w-full",children:(0,r.jsxs)(C,{children:[t&&r.jsx(O,{isExpanded:a,setIsExpanded:i}),(0,r.jsxs)("div",{className:`transition-all duration-300 py-5 ${a?"ml-[400px]":"ml-[100px]"} w-full`,children:[t&&r.jsx(D,{}),e]})]})})})})}s(3824)},9331:(e,t,s)=>{"use strict";s.d(t,{qZ:()=>o,LM:()=>i,Kc:()=>a,tv:()=>r,hO:()=>n,Fl:()=>l,b0:()=>d});let r={src:"/_next/static/media/home-icon.6cad6f25.svg",height:32,width:32,blurWidth:0,blurHeight:0},l={src:"/_next/static/media/tasks-icon.1b08515d.svg",height:32,width:32,blurWidth:0,blurHeight:0},a={src:"/_next/static/media/employees-icon.390dbd95.svg",height:32,width:32,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/departments-icon.251fb945.svg",height:32,width:32,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/jobs-icon.c6149ea0.svg",height:32,width:32,blurWidth:0,blurHeight:0},o={src:"/_next/static/media/chats-icon.28793a3d.svg",height:24,width:24,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/x-icon.f6b8391d.svg",height:24,width:24,blurWidth:0,blurHeight:0}},4660:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(326);s(7577);let l=({children:e,extraStyle:t})=>r.jsx("div",{className:"sm:w-full mobile-grid sm:desktop-grid  "+t,children:e})},2027:(e,t,s)=>{"use strict";s.d(t,{Sc:()=>n});var r=s(5842),l=s(7577);let a=()=>(0,r.I0)(),i=r.v9,n=e=>{let t=a(),s=i(t=>e?e(t):t),r=(0,l.useCallback)(t,[t]),n=(0,l.useMemo)(()=>s,[s]),o=(0,l.useCallback)((e,t)=>r(e(t)),[r]);return{dispatch:r,selector:n,dispatchAction:o}}},6215:(e,t,s)=>{"use strict";s.d(t,{W:()=>a});var r=s(57),l=s(6562);let a=(0,r.io)(void 0,{extraHeaders:{Authorization:"Bearer "+l.Z.get("access_token")}})},4006:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>d,kS:()=>o,pH:()=>i});var r=s(1549),l=s(4099),a=s(6562);let i=(0,r.hg)("user/loginUser",async(e,{rejectWithValue:t})=>{try{let t=await l.Z.post("http://ec2-35-173-139-149.compute-1.amazonaws.com/auth/login",e,{withCredentials:!0});return a.Z.set("access_token",t.data.access_token),a.Z.set("refresh_token",t.data.refresh_token),a.Z.set("is_Authenticated","true"),console.log("logged in successfully : ",t.data),t.data}catch(e){return t(e.response?.data?.message||"Failed to login")}}),n=(0,r.oM)({name:"user",initialState:{userInfo:null,loading:!1,error:null,isAuthenticated:!1,token:null,refresh_token:null,role:null},reducers:{logout:e=>{e.userInfo=null,e.isAuthenticated=!1,e.token=null,e.refresh_token=null,e.error=null,e.role=null,a.Z.remove("access_token"),a.Z.remove("refresh_token")}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null,e.token=null,e.refresh_token=null,e.role=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.userInfo={...t.payload.user},e.isAuthenticated=!0,e.token=t.payload.access_token,e.refresh_token=t.payload.refresh_token,e.role=t.payload.role}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Something went wrong"})}}),{logout:o}=n.actions,d=n.reducer},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`E:\Projects Repository\task_manager\src\app\layout.tsx#default`)},1930:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(9510),l=s(7366);s(1159);let a=()=>r.jsx("div",{children:r.jsx(l.Z,{})})},7366:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(9510),l=s(7383);s(1159);let a=({title:e})=>r.jsx("div",{className:"fixed inset-0  bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-[rgba(0,0,0,0.7)] backdrop-blur-[25px] rounded-lg shadow-lg p-8 flex flex-col justify-center items-center ",children:[r.jsx("svg",{width:0,height:0,children:r.jsx("defs",{children:(0,r.jsxs)("linearGradient",{id:"my_gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#ffffff"})]})})}),r.jsx(l.Z,{sx:{"svg circle":{stroke:"url(#my_gradient)"}}}),(0,r.jsxs)("div",{className:"mt-4 font-bold text-[#ffffff]",children:[e??"Loading"," . . ."]})]})})},3824:()=>{}};