"use strict";exports.id=563,exports.ids=[563],exports.modules={2485:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(326),r=s(5715),l=s(1416),d=s(1774),n=s(7577),i=s(4723),o=s(4173),c=s.n(o);let m=({isOpen:e,onClose:t,taskStatusData:s})=>{let{register:o,handleSubmit:m,formState:{errors:u},reset:x}=(0,i.cI)({resolver:(0,d.X)(l.lj),defaultValues:s||{}});(0,n.useEffect)(()=>{s?x(s):x()},[s,x]);let p=s?`/task-status/update/${s.id}`:"/task-status/create",{mutate:h,isPending:b,isSuccess:y,isError:g,error:f}=(0,r.s)({endpoint:p,onSuccessMessage:"Task Status added successfully!",invalidateQueryKeys:["taskStatuses"]}),j=async e=>{h({name:e.name,description:e.description})};return(0,n.useEffect)(()=>{y?x({id:"",name:"",description:""}):g&&console.error("Failed to create/update the task status",f)},[f,g,y,x]),a.jsx(c(),{isOpen:e,onRequestClose:t,ariaHideApp:!1,contentLabel:"Create/Update Task Status",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[a.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),a.jsx("h1",{className:"text-center text-2xl font-bold mb-6",children:s?"Update Task Status":"Create Task Status"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:m(j),children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Status Name"}),a.jsx("input",{type:"text",...o("name"),className:`w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ${u.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter task status name"}),u.name&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:u.name.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),a.jsx("textarea",{...o("description"),className:`w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ${u.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter description",rows:3}),u.description&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:u.description.message})]}),a.jsx("button",{type:"submit",className:`w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ${b?"opacity-50 cursor-not-allowed":""}`,disabled:b,children:b?s?"Updating...":"Creating...":s?"Update Task Status":"Create Task Status"}),g&&a.jsx("p",{className:"text-red-500 mt-2 text-center",children:f+""}),y&&a.jsx("p",{className:"text-green-500 mt-2 text-center",children:"Added Successfully"})]})]})})}},3908:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(326),r=s(5715),l=s(1416),d=s(1774),n=s(7577),i=s(4723),o=s(4173),c=s.n(o);let m=({isOpen:e,onClose:t,taskTypeData:s})=>{let{register:o,handleSubmit:m,formState:{errors:u},reset:x}=(0,i.cI)({resolver:(0,d.X)(l._v),defaultValues:s||{}});(0,n.useEffect)(()=>{s?x(s):x()},[s,x]);let p=s?`/task-type/update/${s.id}`:"/task-type/create",{mutate:h,isPending:b,isSuccess:y,isError:g,error:f}=(0,r.s)({endpoint:p,onSuccessMessage:"Task Type added successfully!",invalidateQueryKeys:["taskTypes"]}),j=async e=>{h({name:e.name,description:e.description}),console.log(p)};return(0,n.useEffect)(()=>{y?x({id:"",name:"",description:""}):g&&console.error("Failed to create/update the task type",f)},[f,g,y,x]),a.jsx(c(),{isOpen:e,onRequestClose:t,ariaHideApp:!1,contentLabel:"Create/Update Task Type",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[a.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),a.jsx("h1",{className:"text-center text-2xl font-bold mb-6",children:s?"Update Task Type":"Create Task Type"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:m(j),children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Type Name"}),a.jsx("input",{type:"text",...o("name"),className:`w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ${u.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter task type name"}),u.name&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:u.name.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),a.jsx("textarea",{...o("description"),className:`w-full px-4 py-2 mt-1 rounded-lg border focus:outline-none ${u.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter description",rows:3}),u.description&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:u.description.message})]}),a.jsx("button",{type:"submit",className:`w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ${b?"opacity-50 cursor-not-allowed":""}`,disabled:b,children:b?s?"Updating...":"Creating...":s?"Update Task Type":"Create Task Type"}),g&&a.jsx("p",{className:"text-red-500 mt-2 text-center",children:f+""}),y&&a.jsx("p",{className:"text-green-500 mt-2 text-center",children:"Added Successfully"})]})]})})}},1191:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(326);s(7577);var r=s(2375),l=s(708);let d=({open:e,message:t,severity:s,onClose:d})=>{let n=(e,t)=>{"clickaway"!==t&&d()};return a.jsx(r.Z,{open:e,autoHideDuration:2e3,onClose:n,children:a.jsx(l.Z,{onClose:n,severity:s,variant:"filled",sx:{width:"100%"},children:t})})}},6563:(e,t,s)=>{s.d(t,{Z:()=>C});var a=s(326),r=s(1191),l=s(5715),d=s(5342),n=s(1416),i=s(1774),o=s(7577),c=s(4723),m=s(4173),u=s.n(m),x=s(2485),p=s(3908);let h="ec2-35-173-139-149.compute-1.amazonaws.com",b=({isOpen:e,onClose:t,taskData:s})=>{let{register:m,handleSubmit:b,formState:{errors:y},reset:g,watch:f}=(0,c.cI)({resolver:(0,i.X)(n.KV),defaultValues:s||{}}),[j,N]=(0,o.useState)(null);(0,o.useEffect)(()=>{s?g(s):g()},[s,g]);let[v,k]=(0,o.useState)({open:!1,message:"",severity:"success"}),w=s?`/tasks/update/${s.id}`:"/tasks/create",{mutate:T,isPending:_,isSuccess:q,isError:S,error:Z}=(0,l.s)({endpoint:w,onSuccessMessage:"Task added successfully!",invalidateQueryKeys:["tasks"]}),C=async e=>{N(null),T({...e,due_date:new Date(e.due_date).toISOString()}),setInterval(t,3e3)};(0,o.useEffect)(()=>{q?(k({open:!0,message:s?"Task updated successfully!":"Task created successfully!",severity:"success"}),g()):S&&(console.error("Error creating/updating task:",Z),k({open:!0,message:Z+""||"Failed to process the request. Please try again.",severity:"error"}))},[Z,S,q,g,s]);let{data:E}=(0,d.Z)({queryKey:["taskTypes"],url:`http://${h}/task-type/find-all`,setSnackbarConfig:k,nestedData:!0}),{data:D}=(0,d.Z)({queryKey:["taskStatuses"],url:`http://${h}/task-status/find-all`,setSnackbarConfig:k,nestedData:!0}),{data:$}=(0,d.Z)({queryKey:["departments"],url:`http://${h}/department/get-departments`,setSnackbarConfig:k}),{data:I}=(0,d.Z)({queryKey:["employees"],url:`http://${h}/emp/get-all-emps`,setSnackbarConfig:k}),A=f("emp"),z=f("department_id"),[R,P]=(0,o.useState)(!1),[U,K]=(0,o.useState)(!1);(0,o.useEffect)(()=>{A?K(!0):K(!1),z?P(!0):P(!1)},[A,z]);let[L,O]=(0,o.useState)(!1),[F,H]=(0,o.useState)(!1);return(0,a.jsxs)(u(),{isOpen:e,onRequestClose:t,ariaHideApp:!1,contentLabel:"Create/Update Task",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full relative",children:[a.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-700 hover:text-red-500",children:"\xd7"}),a.jsx("h1",{className:"text-center text-2xl font-bold mb-6",children:s?"Update Task":"Create Task"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:b(C),children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Name"}),a.jsx("input",{type:"text",...m("name"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter task name"}),y.name&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.name.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Description"}),a.jsx("textarea",{...m("description"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter task description"}),y.description&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.description.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Type"}),(0,a.jsxs)("div",{className:"flex gap-[8px]",children:[(0,a.jsxs)("select",{...m("task_type"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.task_type?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a task type"}),E&&E.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("div",{onClick:()=>H(!0),className:"border-gray-500 border-dashed border-2 text-center rounded-md w-[45px] h-[40px] mt-1 content-center text-lg font-bold cursor-pointer",children:["+"," "]})]}),y.task_type&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.task_type.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Priority"}),a.jsx("input",{type:"number",...m("priority"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.priority?"border-red-500":"border-gray-300"}`,placeholder:"Enter priority"}),y.priority&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.priority.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Assigned Employee"}),(0,a.jsxs)("select",{...m("emp"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.emp?"border-red-500":"border-gray-300"}`,disabled:R,children:[a.jsx("option",{value:"",children:"Select an employee (optional)"}),I&&I.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),y.emp&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.emp.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Department"}),(0,a.jsxs)("select",{...m("department_id"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.department_id?"border-red-500":"border-gray-300"}`,disabled:U,children:[a.jsx("option",{value:"",children:"Select a department (optional)"}),$&&$.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),y.department_id&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.department_id.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Task Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{...m("status"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.status?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select task status"}),D&&D.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("div",{onClick:()=>O(!0),className:"mt-1 border-gray-500 border-dashed border-2 text-center rounded-md w-[45px] h-[40px] content-center text-lg font-bold cursor-pointer",children:["+"," "]})]}),y.status&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.status.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-600 text-sm font-medium",children:"Due Date"}),a.jsx("input",{type:"date",...m("due_date"),className:`w-full px-4 py-2 mt-1 rounded-lg border ${y.due_date?"border-red-500":"border-gray-300"}`}),y.due_date&&a.jsx("p",{className:"text-red-500 mt-1 text-sm",children:y.due_date.message})]}),a.jsx("button",{type:"submit",className:`w-full py-2 mt-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition duration-200 ${_?"opacity-50 cursor-not-allowed":""}`,disabled:_,children:_?s?"Updating...":"Creating...":s?"Update Task":"Create Task"}),j&&a.jsx("p",{className:`mt-2 text-center ${j.includes("successfully")?"text-green-500":"text-red-500"}`,children:j})]})]}),a.jsx(x.Z,{isOpen:L,onClose:()=>O(!1)}),a.jsx(p.Z,{isOpen:F,onClose:()=>H(!1)}),a.jsx(r.Z,{open:v.open,message:v.message,severity:v.severity,onClose:()=>k(e=>({...e,open:!1}))})]})};var y=s(6014),g=s(622),f=s(4099),j=s(6562);let N=e=>new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),v=({isOpen:e,onClose:t,taskData:s})=>{let[r,l]=(0,o.useState)(""),[d,n]=(0,o.useState)(null),[i,c]=(0,o.useState)([]),m=(0,o.useRef)(null);(0,o.useEffect)(()=>{let t=async()=>{try{let e=await f.Z.get(`http://ec2-35-173-139-149.compute-1.amazonaws.com/comment/${s.id}`,{headers:{Authorization:"Bearer "+j.Z.get("access_token")}});c(e.data)}catch(e){console.error("Error fetching comments:",e)}};e&&t()},[e,s]);let x=async()=>{if(r.trim()||d)try{let e=await f.Z.post("http://ec2-35-173-139-149.compute-1.amazonaws.com/comment",{content:r,taskId:s?.id},{headers:{Authorization:"Bearer "+j.Z.get("access_token")}});c(t=>[...t,e.data]),l(""),n(null),m.current&&(m.current.value="")}catch(e){console.error("Error submitting comment:",e)}else alert("Please write a comment or attach a file before sending.")};if(!s)return null;let p=1==s.priority?"bg-red-100  text-red-600":2==s.priority?"bg-yellow-100  text-yellow-600":"bg-green-100  text-green-600";return a.jsx(u(),{isOpen:e,onRequestClose:t,ariaHideApp:!1,contentLabel:"Task Details",className:"fixed inset-0 flex items-center justify-center",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-xl w-full relative",children:[a.jsx("button",{onClick:e=>{e.stopPropagation(),t()},className:"absolute top-4 right-4 text-gray-700 hover:text-red-500",children:a.jsx(g.aHS,{})}),(0,a.jsxs)("div",{className:"flex justify-between items-center my-5",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-[#1b1a40] text-lg font-bold",children:"Task Details"})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("div",{className:"bg-gray-100 px-4 py-2 rounded-2xl border-none text-gray-800 font-medium",children:s.status.name}),a.jsx("div",{className:"px-4 py-2 rounded-2xl border-none font-medium "+p,children:1==s.priority?"High":2==s.priority?"Medium":"Low"})]})]}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:s.name}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"font-bold mb-2 block",children:"Members"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[s.emp?a.jsx("div",{className:"w-8 h-8 rounded-full bg-[#1b1a40] text-white flex items-center justify-center text-sm font-bold",children:s.emp.name.charAt(0).toUpperCase()}):a.jsx("span",{className:"text-gray-500",children:"No assigned employee"}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-300 text-white flex items-center justify-center text-sm font-bold",children:"AA"}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-green-300 text-white flex items-center justify-center text-sm font-bold",children:"MK"}),a.jsx("button",{className:"w-8 h-8 rounded-full bg-blue-100 text-[#1b1a40] flex items-center justify-center text-sm font-bold",children:"+"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"font-bold mb-2 block",children:"Description"}),a.jsx("div",{className:"bg-gray-100 p-4 rounded-md text-gray-700",children:s.description})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"font-bold",children:"Task Type:"}),a.jsx("p",{className:"mt-1 text-gray-600",children:s.task_type.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"font-bold",children:"Department:"}),a.jsx("p",{className:"mt-1 text-gray-600",children:s.emp?.department?s.emp?.department?.name:"No department assigned"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"font-bold",children:"Due Date:"}),a.jsx("p",{className:"mt-2 text-gray-600",children:new Date(s.due_date).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"font-bold mb-2 block",children:"Comments"}),a.jsx("div",{className:"bg-white border shadow-md p-4 rounded-lg text-gray-700 space-y-2 h-40 overflow-y-auto ",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.length>0?i.map((e,t)=>(0,a.jsxs)("div",{className:"flex mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-[#1b1a40] text-white rounded-full flex items-center justify-center mr-4",children:e.author.name.slice(0,1)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-900 font-semibold",children:e.author.name}),a.jsx("p",{className:"text-xs text-gray-500",children:N(e.createdAt)}),e.content&&a.jsx("div",{className:"bg-gray-100   rounded-md p-2 mt-2 text-sm",children:e.content}),e.files&&a.jsx("div",{className:"mt-2",children:e.files.map((e,t)=>a.jsx("div",{className:"bg-gray-200 text-gray-700 p-1 px-2 rounded-md inline-block mr-2 mb-1",children:e},t))})]})]},t)):a.jsx("p",{children:"No comments yet."})}),(0,a.jsxs)("div",{className:"mt-4 p-2 bg-white border rounded-md shadow-sm",children:[a.jsx("textarea",{value:r,onChange:e=>l(e.target.value),className:"w-full mt-2 p-2 border-none outline-none focus:outline-none",placeholder:"Add a comment...",rows:2}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("div",{children:[a.jsx("input",{type:"file",ref:m,onChange:e=>{e.target.files&&e.target.files[0]&&n(e.target.files[0])},className:"hidden",id:"attach-file"}),(0,a.jsxs)("label",{htmlFor:"attach-file",className:"cursor-pointer text-gray-600 hover:text-gray-900",children:[a.jsx(g.jLr,{className:"inline mr-1"})," Attach File"]}),d&&a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d.name})]}),(0,a.jsxs)("button",{onClick:x,className:"bg-[#1b1a40] text-white px-3 py-1 rounded-md hover:bg-blue-600 flex items-center",children:[a.jsx(g.Y2X,{className:"mr-1"})," Send"]})]})]})]})]})})},k=e=>{switch(e){case"1":return"bg-red-100 text-red-500";case"2":return"bg-yellow-100 text-yellow-500";case"3":return"bg-green-100 text-green-500";default:return"bg-blue-100 text-blue-600"}},w=e=>{switch(e){case"1":return"High";case"2":return"Medium";case"3":return"Low";default:return"Normal"}},T=({taskId:e,index:t,title:s,commentsCount:r,attachmentsCount:l,priority:d,task:n})=>{let[i,c]=(0,o.useState)(!1);return a.jsx(y._l,{draggableId:e,index:t,children:e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,onClick:()=>c(!0),children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:s}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(g.ajU,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:r})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(g.jLr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:l})]})]}),a.jsx("div",{className:`p-2 w-16 text-xs text-center font-bold rounded-full ${k(d)}`,children:w(d)})]}),a.jsx(v,{isOpen:i,onClose:()=>c(!1),taskData:n})]})})},_=({columnId:e,title:t,taskCount:s,tasks:r,setIsModalOpen:l})=>a.jsx(y.bK,{droppableId:e,children:e=>(0,a.jsxs)("div",{className:"bg-[#f0f4f9] rounded-xl shadow-md p-4 flex flex-col space-y-4 col-span-3",ref:e.innerRef,...e.droppableProps,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:t}),a.jsx("div",{className:"bg-white text-[#1b1a40] px-2 rounded-xl w-10 text-center shadow-md py-0.5 text-sm font-bold",children:s})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[r.map((e,t)=>a.jsx(T,{task:e,taskId:e.id,index:t,title:e.name,commentsCount:16,attachmentsCount:24,priority:e.priority+""},e.id)),a.jsx("div",{onClick:()=>{l(!0)},className:"rounded-xl shadow-md p-4 h-20 w-full border-dashed border-blue-300 border-2 text-center content-center text-xl font-bold text-blue-300 cursor-pointer",children:"+"}),e.placeholder]})]})});var q=s(8139);let S=(e,t)=>{let s={};return t.forEach(e=>{s[e.id]=[]}),e.forEach(e=>{let t=e.status.id;s[t]?s[t].push(e):s.backlog.push(e)}),s},Z=async(e,t)=>{try{await f.Z.post(`http://ec2-35-173-139-149.compute-1.amazonaws.com/tasks/update/${e}`,{status:t},{headers:{Authorization:"Bearer "+j.Z.get("access_token")}})}catch(e){console.error("Failed to update task status",e)}},C=({selectedOption:e})=>{let[t,s]=(0,o.useState)(!1),[l,n]=(0,o.useState)({open:!1,message:"",severity:"success"}),{data:i,isLoading:c}=(0,d.Z)({queryKey:["taskStatuses"],url:"http://ec2-35-173-139-149.compute-1.amazonaws.com/task-status/find-all",setSnackbarConfig:n,nestedData:!0}),{data:m,isLoading:u}=(0,d.Z)({queryKey:["tasks",e],url:`http://ec2-35-173-139-149.compute-1.amazonaws.com/tasks/${e}`,setSnackbarConfig:n,nestedData:!0}),[x,p]=(0,o.useState)({});(0,o.useEffect)(()=>{m&&i&&p(S(m,i))},[m,i]);let h=async e=>{let{destination:t,source:s}=e;if(!t||t.droppableId===s.droppableId&&t.index===s.index)return;let a=x[s.droppableId],r=x[t.droppableId];if(a===r){let e=Array.from(a),[r]=e.splice(s.index,1);e.splice(t.index,0,r),p({...x,[s.droppableId]:e})}else{let e=Array.from(a||[]),[l]=e.splice(s.index,1),d=Array.from(r||[]);d.splice(t.index,0,l),p({...x,[s.droppableId]:e,[t.droppableId]:d});let n=t.droppableId;try{await Z(l.id,n)}catch(e){console.error("Error updating task status:",e)}}};return u||c?a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:a.jsx(q.default,{size:100})}):m?(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z5,{onDragEnd:h,children:i?.map(e=>a.jsx(_,{columnId:e.id,title:e.name,taskCount:x[e.id]?.length||0,tasks:x[e.id]||[],setIsModalOpen:s},e.id))}),a.jsx(b,{isOpen:t,onClose:()=>s(!1),taskData:null}),a.jsx(r.Z,{open:l.open,message:l.message,severity:l.severity,onClose:()=>n(e=>({...e,open:!1}))})]}):a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 flex flex-col items-center justify-center gap-5",children:"No Tasks"})}},5715:(e,t,s)=>{s.d(t,{s:()=>n});var a=s(4976),r=s(119),l=s(4099),d=s(6562);let n=({endpoint:e,onSuccessMessage:t,invalidateQueryKeys:s=[],options:n})=>{let i=(0,a.NL)(),o=async t=>(await l.Z.post(`http://ec2-35-173-139-149.compute-1.amazonaws.com${e}`,t,{headers:{Authorization:`Bearer ${d.Z.get("access_token")}`}})).data;return(0,r.D)({mutationFn:o,onSuccess:e=>{t&&console.log(t,e),s.forEach(e=>{i.invalidateQueries(e)})},onError:e=>{console.error("Error during the create/add request:",e)},...n})}},5342:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(4412),r=s(4099),l=s(6562);let d=({queryKey:e,url:t,setSnackbarConfig:s,nestedData:d=!1,...n})=>(0,a.a)({queryKey:e,queryFn:async()=>{try{let e=await r.Z.get(t,{headers:{Authorization:`Bearer ${l.Z.get("access_token")}`}});return d?e.data.data:e.data}catch(e){throw r.Z.isAxiosError(e)&&e.response?s({open:!0,message:`Error: ${e.response.data.message||"An error occurred"}`,severity:"error"}):s({open:!0,message:"Network error. Please try again later.",severity:"error"}),e}},retry:2,...n})},1416:(e,t,s)=>{s.d(t,{KV:()=>l,T$:()=>r,_v:()=>n,lj:()=>d});var a=s(123);let r=a.Ry().shape({name:a.Z_().required("Task name is required"),description:a.Z_().required("Description is required"),task_type:a.Z_().required("Task type is required"),priority:a.Rx().required("Priority is required").typeError("Priority must be a number"),emp:a.Z_().nullable(),department_id:a.Z_().nullable(),status:a.Z_().required("Task status is required"),due_date:a.hT().required("Due date is required").typeError("Invalid date format"),files:a.IX().of(a.Z_()),isRecurring:a.O7(),intervalInDays:a.Rx().when("isRecurring",{is:!0,then:e=>e.required("Interval in days is required").min(1,"Interval must be at least 1 day"),otherwise:e=>e.nullable()}),end_date:a.hT().when("isRecurring",{is:!0,then:e=>e.required("End date is required").typeError("Invalid date format"),otherwise:e=>e.nullable()})}),l=a.Ry().shape({name:a.Z_().required("Task name is required"),description:a.Z_().required("Description is required"),task_type:a.Z_().required("Task type is required"),priority:a.Rx().required("Priority is required").typeError("Priority must be a number"),emp:a.Z_().nullable(),department_id:a.Z_().nullable(),status:a.Z_().required("Task status is required"),due_date:a.hT().required("Due date is required").typeError("Invalid date format"),files:a.IX().of(a.Z_())}),d=a.Ry().shape({name:a.Z_().required("Task status name is required"),description:a.Z_().required("Description is required")}),n=a.Ry().shape({name:a.Z_().required("Task type name is required"),description:a.Z_().required("Description is required")})}};